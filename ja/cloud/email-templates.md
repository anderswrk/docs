# メールテンプレート

## メールコンテンツの管理

メールテンプレートを使用すると、動的コンテンツを含む一貫性のあるプロフェッショナルなメールを作成できます。メッセージを送信するたびにメールのHTMLとテキストを書く代わりに、AIがあなたに代わってメールを送信するために使用できる再利用可能なテンプレートを作成します。

テンプレートはMarkdownで書かれています — ブログ投稿やドキュメントに使用されるのと同じシンプルなフォーマット言語 — そして送信時に自動的にクリーンなHTMLに変換されます。これは、複雑なHTMLコードを書く必要なく、メールがプロフェッショナルに見えることを意味します。

## テンプレートの仕組み

特定のタイプのメール（ウェルカムメッセージ、パスワードリセット、注文確認など）を送信したいとAIに伝えると、自動的に適切なメールテンプレートを作成します。各テンプレートには以下が含まれます：

**件名**: メール件名に表示される内容で、ユーザーの名前などの動的情報を含めることができます

**本文コンテンツ**: 見出し、太字テキスト、リンク、その他のフォーマット用にMarkdownでフォーマットされたメールメッセージ

**変数**: メール送信時に実際の情報に置き換えられるプレースホルダー、例えば`$firstName`、`$lastName`、`$email`、または`$timestamp`

**テンプレートタイプ**: システムメール（パスワードリセット）、トランザクションメール（領収書）、マーケティングメール（ニュースレター）のいずれか

## 変数とパーソナライゼーション

テンプレートは、メール送信時に自動的に実際の情報に置き換えられる簡単な変数を使用します。例えば：

テンプレートは次のように言うかもしれません：「こんにちは$firstName、私たちのサービスへようこそ！あなたのアカウントメールは$emailです。」

sarah@example.comというメールアドレスを持つ田中さやかという名前のユーザーに送信されると、次のようになります：「こんにちはさやか、私たちのサービスへようこそ！あなたのアカウントメールはsarah@example.comです。」

**利用可能な標準変数**：
- `$firstName` - 受信者の名
- `$lastName` - 受信者の姓
- `$email` - 受信者のメールアドレス
- `$timestamp` - メールが送信された時刻

AIは、注文番号、確認コード、またはメールに表示されるべきその他の情報など、アプリケーション固有のカスタム変数を追加することもできます。

## テンプレートタイプ

### システムテンプレート
アプリケーションの動作に不可欠なメール：パスワードリセット、メール確認、アカウント有効化、セキュリティアラート。これらは、ベストプラクティスに従い、一貫性を維持するためにAIによって作成および管理されます。

### トランザクションテンプレート
ユーザーアクションによってトリガーされるメール：注文確認、発送通知、領収書、パスワード変更確認。これらは、アプリケーションとのやり取りに関する重要な情報をユーザーに提供します。

### マーケティングテンプレート
ニュースレター、お知らせ、プロモーションメール、製品アップデート。これらは、新機能、オファー、またはコンテンツについてユーザーとコミュニケーションするためのものです。

## テンプレートの作成と管理

### AIを通じて
メールニーズを説明すると、AIが適切なテンプレートを作成します。例えば、「ユーザーがサインアップしたときにウェルカムメールを送信する」と言うと、AIは適切なコンテンツと変数を含むウェルカムテンプレートを作成します。

### 管理インターフェースを通じて
すべてのテンプレートを表示し、そのコンテンツを確認し、件名と本文テキストを編集し、テンプレートを有効または無効にできます。インターフェースは、プレビュー機能を備えたMarkdownエディターを提供します。

### 自動機能
- **Markdownレンダリング** - Markdownは自動的にクリーンでレスポンシブなHTMLに変換されます
- **セキュリティ保護** - 変数はセキュリティ問題を防ぐために自動的にエスケープされます
- **テンプレート検証** - システムは保存前にテンプレートを検証します
- **バージョン追跡** - テンプレートへの変更はタイムスタンプとユーザー情報で追跡されます

## 実際の例

### ユーザー登録
誰かがサインアップすると、AIはウェルカムテンプレートを使用して、名前、アカウント詳細、次のステップを含むブランドメールを送信します。メールはプロフェッショナルに見え、ブランドと一貫性があります。

### パスワードリセット
ユーザーがパスワードを忘れた場合、システムテンプレートは安全なリセットリンクを送信します。テンプレートには名前が含まれ、何が起こったかを説明し、明確な指示を提供します。

### 注文確認
購入後、トランザクションテンプレートは注文詳細、商品リスト、合計金額、配送情報を含む領収書をメールで送信します — すべてデータベースから自動的に入力されます。

### 週次ニュースレター
マーケティングテンプレートは、新機能やコンテンツに関する更新を送信し、各受信者の名前と好みでパーソナライズされます。

## セキュリティと安全性

**XSS保護**: すべての変数はメール送信時に自動的にエスケープされ、インジェクション攻撃を防ぎます。ユーザーが送信したデータの悪意のあるコンテンツについて心配する必要はありません — システムが自動的にサニタイゼーションを処理します。

**送信前のプレビュー**: 管理インターフェースを使用すると、アプリケーションで使用する前にサンプルデータでテンプレートがどのように見えるかをプレビューできます。

**検証**: システムは、テンプレート内のすべての変数が有効であり、Markdown構文が正しいことを確認してから、テンプレートの保存を許可します。

## ベストプラクティス

✅ **テンプレートを使用** - アプリケーションにメールコンテンツをハードコーディングするのではなく、AIにメールテンプレートを作成させます。

✅ **変数でパーソナライズ** - `$firstName`やその他の変数を使用して、メールを個人的で関連性のあるものにします。

✅ **送信前にプレビュー** - 常にサンプルデータでテンプレートをプレビューして、正しく見えることを確認してください。

✅ **シンプルに保つ** - 明確さのためにMarkdownフォーマットを使用してください。過度に複雑なレイアウトは避けてください。

❌ **メールコンテンツをハードコーディングしない** - テンプレートを使用すると、コード変更なしでメールコンテンツを更新でき、一貫性を維持できます。

❌ **テンプレートに機密データを入れない** - 特定のユーザーデータを埋め込むのではなく、動的コンテンツには変数を使用してください。

---

**関連ドキュメント：**
- [メール配信 →](/ja/cloud/email-delivery)
- [データベース →](/ja/cloud/database)
- [管理インターフェース →](/ja/cloud/admin)
